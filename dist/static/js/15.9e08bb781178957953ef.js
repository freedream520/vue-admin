webpackJsonp([15],{IIJn:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var o=a("OLlj"),r=a.n(o),s={name:"SmsConfig",data:function(){var e;return{searchInfo:{list:[],form:{name:"",status:"",sceneId:""}},sceneList:["逾期"],statusList:["审核中","已审核","审核不通过","启用","禁用"],addInfo:{isOpen:!1,form:(e={name:"",sceneId:1,companyCode:"",msgSign:"",platCode:1,platName:"金爱农",productCode:"WNA",remark:"",status:1,senceExt:""},n(e,"sceneId",1),n(e,"sendType",1),n(e,"targetType",1),n(e,"templateContent",""),n(e,"templateName",""),e)},changeInfo:{isOpen:!1,form:{}},reasonInfo:{isOpen:!1,form:{}},rules:{companyCode:[{required:!0,message:"请选择公司",trigger:"change"}],sceneId:[{type:"number",required:!0,message:"请选择场景",trigger:"change"}],senceExt:[{required:!0,message:"扩展字段不能为空",trigger:"change"}],remark:[{required:!0,message:"备注不能为空",trigger:"change"}],msgSign:[{required:!0,message:"短信签名不能为空",trigger:"change"}],templateContent:[{required:!0,message:"短信模板不能为空",trigger:"change"}]}}},methods:{getListAjax:function(){console.log("发送ajax查询数据或分页规则处理"),this.searchInfo.list=r.a},formatValue:function(e,t,a){return"status"===t.property?this.statusList[a-1]:"sceneId"===t.property?this.sceneList[a-1]:void 0},sendAddAjax:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;console.log("在此发送addInfo.form数据"),console.log(t.addInfo.form)})},resetAddInfo:function(){this.resetForm("formByAdd"),this.addInfo.isOpen=!1},openChange:function(e){var t=this;this.changeInfo.isOpen=!0,setTimeout(function(){var a;t.$refs.formByChange.resetFields(),t.changeInfo.form=(a={id:e.id,name:e.name,sceneId:e.sceneId,companyCode:e.companyCode,msgSign:e.msgSign,platCode:e.platCode,platName:e.platName,productCode:e.productCode,remark:e.remark,status:e.status,senceExt:e.senceExt},n(a,"sceneId",e.sceneId),n(a,"sendType",e.sendType),n(a,"targetType",e.targetType),n(a,"templateContent",e.templateContent),n(a,"templateName",e.templateName),a)},100)},sendChangeAjax:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;console.log("在此发送changeInfo.form数据"),console.log(t.changeInfo.form)})},resetChangeInfo:function(){this.$refs.formByChange.resetFields(),this.changeInfo.isOpen=!1},openReason:function(e){this.reasonInfo={isOpen:!0,form:e}}},mounted:function(){this.getListAjax()}},l=s,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("Breadcrumb"),e._v(" "),a("SearchWarp",[a("el-form",{ref:"searchInfo.form",attrs:{inline:!0,model:e.searchInfo.form}},[a("el-form-item",{attrs:{label:"公司"}},[a("SelectCompany",{model:{value:e.searchInfo.form.companyCode,callback:function(t){e.$set(e.searchInfo.form,"companyCode",t)},expression:"searchInfo.form.companyCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"场景"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchInfo.form.sceneId,callback:function(t){e.$set(e.searchInfo.form,"sceneId",t)},expression:"searchInfo.form.sceneId"}},e._l(e.sceneList,function(e,t){return a("el-option",{key:t+1,attrs:{label:e,value:t+1}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchInfo.form.status,callback:function(t){e.$set(e.searchInfo.form,"status",t)},expression:"searchInfo.form.status"}},e._l(e.statusList,function(e,t){return a("el-option",{key:t+1,attrs:{label:e,value:t+1}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"success"},on:{click:e.getListAjax}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.addInfo.isOpen=!0}}},[e._v("新增")])],1)],1)],1),e._v(" "),a("ContentWarp",[a("el-table",{attrs:{border:"",stripe:"",data:e.searchInfo.list,size:"small"}},[a("el-table-column",{attrs:{align:"center",label:"公司",prop:"companyName","min-width":"320"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"场景",prop:"sceneId",formatter:e.formatValue,width:"70"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"扩展字段",prop:"senceExt",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"短信模版",prop:"templateContent","min-width":"360"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态",prop:"status",formatter:e.formatValue,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"140px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?[a("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",plain:""},on:{click:function(a){e.openChange(t.row)}}},[e._v("修改")])]:e._e(),e._v(" "),3===t.row.status?[a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){e.openReason(t.row)}}},[e._v("查看不过理由")])]:e._e()]}}])})],1)],1),e._v(" "),a("ContentWarp",{staticClass:"center"},[a("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next, jumper",total:126}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增模板",width:"600px",center:"",visible:e.addInfo.isOpen,"show-close":!1},on:{"update:visible":function(t){e.$set(e.addInfo,"isOpen",t)}}},[a("el-form",{ref:"formByAdd",attrs:{model:e.addInfo.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"所属公司",prop:"companyCode"}},[a("SelectCompany",{model:{value:e.addInfo.form.companyCode,callback:function(t){e.$set(e.addInfo.form,"companyCode",t)},expression:"addInfo.form.companyCode"}}),e._v(" "),a("div",{staticClass:"disNone"},[a("el-input",{attrs:{type:"text"},model:{value:e.addInfo.form.companyCode,callback:function(t){e.$set(e.addInfo.form,"companyCode",t)},expression:"addInfo.form.companyCode"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"产品"}},[a("el-input",{attrs:{type:"text",value:"微农贷",disabled:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"场景",prop:"sceneId"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.addInfo.form.sceneId,callback:function(t){e.$set(e.addInfo.form,"sceneId",t)},expression:"addInfo.form.sceneId"}},e._l(e.sceneList,function(e,t){return a("el-option",{key:t+1,attrs:{label:e,value:t+1}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"扩展字段",prop:"senceExt"}},[a("el-input",{attrs:{type:"text"},model:{value:e.addInfo.form.senceExt,callback:function(t){e.$set(e.addInfo.form,"senceExt",t)},expression:"addInfo.form.senceExt"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"text"},model:{value:e.addInfo.form.remark,callback:function(t){e.$set(e.addInfo.form,"remark",t)},expression:"addInfo.form.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送方式",prop:"sendType"}},[a("el-radio-group",{model:{value:e.addInfo.form.sendType,callback:function(t){e.$set(e.addInfo.form,"sendType",t)},expression:"addInfo.form.sendType"}},[a("el-radio",{attrs:{label:1}},[e._v("短信")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发送对象",prop:"targetType"}},[a("el-radio-group",{model:{value:e.addInfo.form.targetType,callback:function(t){e.$set(e.addInfo.form,"targetType",t)},expression:"addInfo.form.targetType"}},[a("el-radio",{attrs:{label:1}},[e._v("借款人")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"短信签名",prop:"msgSign"}},[a("el-input",{attrs:{type:"text"},model:{value:e.addInfo.form.msgSign,callback:function(t){e.$set(e.addInfo.form,"msgSign",t)},expression:"addInfo.form.msgSign"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"短信模板",prop:"templateContent"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.addInfo.form.templateContent,callback:function(t){e.$set(e.addInfo.form,"templateContent",t)},expression:"addInfo.form.templateContent"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sendAddAjax("formByAdd")}}},[e._v("新 增")]),e._v(" "),a("el-button",{on:{click:e.resetAddInfo}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改模板",width:"600px",center:"",visible:e.changeInfo.isOpen,"show-close":!1},on:{"update:visible":function(t){e.$set(e.changeInfo,"isOpen",t)}}},[a("el-form",{ref:"formByChange",attrs:{model:e.changeInfo.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"所属公司",prop:"companyCode"}},[a("SelectCompany",{model:{value:e.changeInfo.form.companyCode,callback:function(t){e.$set(e.changeInfo.form,"companyCode",t)},expression:"changeInfo.form.companyCode"}}),e._v(" "),a("div",{staticClass:"disNone"},[a("el-input",{attrs:{type:"text"},model:{value:e.changeInfo.form.companyCode,callback:function(t){e.$set(e.changeInfo.form,"companyCode",t)},expression:"changeInfo.form.companyCode"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"产品"}},[a("el-input",{attrs:{type:"text",value:"微农贷",disabled:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"场景",prop:"sceneId"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.changeInfo.form.sceneId,callback:function(t){e.$set(e.changeInfo.form,"sceneId",t)},expression:"changeInfo.form.sceneId"}},e._l(e.sceneList,function(e,t){return a("el-option",{key:t+1,attrs:{label:e,value:t+1}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"扩展字段",prop:"senceExt"}},[a("el-input",{attrs:{type:"text"},model:{value:e.changeInfo.form.senceExt,callback:function(t){e.$set(e.changeInfo.form,"senceExt",t)},expression:"changeInfo.form.senceExt"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"text"},model:{value:e.changeInfo.form.remark,callback:function(t){e.$set(e.changeInfo.form,"remark",t)},expression:"changeInfo.form.remark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送方式",prop:"sendType"}},[a("el-radio-group",{model:{value:e.changeInfo.form.sendType,callback:function(t){e.$set(e.changeInfo.form,"sendType",t)},expression:"changeInfo.form.sendType"}},[a("el-radio",{attrs:{label:1}},[e._v("短信")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发送对象",prop:"targetType"}},[a("el-radio-group",{model:{value:e.changeInfo.form.targetType,callback:function(t){e.$set(e.changeInfo.form,"targetType",t)},expression:"changeInfo.form.targetType"}},[a("el-radio",{attrs:{label:1}},[e._v("借款人")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"短信签名",prop:"msgSign"}},[a("el-input",{attrs:{type:"text"},model:{value:e.changeInfo.form.msgSign,callback:function(t){e.$set(e.changeInfo.form,"msgSign",t)},expression:"changeInfo.form.msgSign"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"短信模板",prop:"templateContent"}},[a("el-input",{attrs:{type:"textarea",rows:3},model:{value:e.changeInfo.form.templateContent,callback:function(t){e.$set(e.changeInfo.form,"templateContent",t)},expression:"changeInfo.form.templateContent"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.sendChangeAjax("formByChange")}}},[e._v("修 改")]),e._v(" "),a("el-button",{on:{click:e.resetChangeInfo}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"不过理由",width:"600px",center:"",visible:e.reasonInfo.isOpen,"show-close":!1},on:{"update:visible":function(t){e.$set(e.reasonInfo,"isOpen",t)}}},[a("p",{staticClass:"text-center"},[e._v(e._s(e.reasonInfo.form.verifyFailReason))]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.reasonInfo.isOpen=!1}}},[e._v("关 闭")])],1)])],1)},c=[],d={render:m,staticRenderFns:c},p=d,i=a("/Xao"),f=i(l,p,!1,null,null,null);t.default=f.exports},OLlj:function(e,t){e.exports=[{taskId:178,senceExt:"85",status:5,productCode:"WND",remark:"33333",sceneId:1,taskDesc:"逾期还款1-2天的短信通知_哈哈",msgSign:"333333",sendType:1,platCode:"1",companyName:"浙江金爱农网络科技有限公司",taskName:"逾期还款1-2天的短信通知_哈哈",companyCode:"0001",id:63,platName:"金爱农",templateContent:"33333333",taskUrl:"http://172.16.34.174:10030/com.cgtz.module.cgjr.task.OutOfRangeRepayTask",senceName:"逾期",targetType:1,productName:"微农贷"},{taskId:179,senceExt:"1,2,3,4,5,6,7,8",status:5,productCode:"WND",remark:"看看",sceneId:1,taskDesc:"欠款1-8天的逾期短信",msgSign:"朗格集团草根事业部",sendType:1,platCode:"1",companyName:"江苏金爱农网络科技有限公司",taskName:"欠款1-8天的逾期短信",companyCode:"0003",id:64,platName:"金爱农",templateContent:"尊敬地用户${username}，您好，借钱不还不太好吧。请于下月${date}前还给我，保底金额${amount} 如有超期利息另算。",taskUrl:"http://172.16.34.174:9990/com.cgtz.module.cgjr.task.OutOfRangeRepayTask",senceName:"逾期",targetType:1,productName:"微农贷"},{taskId:180,senceExt:"-4",status:5,productCode:"WND",remark:"逾期到期5天，下午16:00发送",sceneId:1,taskDesc:"衢州江山直营点2017-9-20第1期到期前5天发送短信",msgSign:"宋江贷",sendType:1,platCode:"1",companyName:"浙江金爱农网络科技有限公司衢州分公司江山直营点",taskName:"逾期前4天短信发送-江山直营点",companyCode:"000100010001",id:65,platName:"金爱农",templateContent:"尊敬的${username}，您有一笔应还金额￥${amount}元的借 款将于${date} 中午${date}发生逾 期，逾 期后需要缴纳逾 期违约金，并对您的信用评分产生影响，请您及时还款。",taskUrl:"http://172.16.34.174:10030/com.cgtz.module.cgjr.task.OutOfRangeRepayTask",senceName:"逾期",targetType:1,productName:"微农贷"},{senceExt:"111111",status:1,productCode:"WND",remark:"11111",sceneId:1,msgSign:"【微农贷】",sendType:1,platCode:"1",companyName:"杭州市分公司",companyCode:"00010002",id:66,platName:"金爱农",templateContent:"1111111",senceName:"逾期",targetType:1,productName:"微农贷"},{taskId:181,senceExt:"1，2，5",status:5,productCode:"WND",remark:"逾期1，2，3",sceneId:1,taskDesc:"逾期1，2，5天后发送逾期短信-2017-09-18",msgSign:"【衢州金爱农】",sendType:1,platCode:"1",companyName:"浙江金爱农网络科技有限公司衢州分公司",taskName:"逾期1，2，5天后发送逾期短信",companyCode:"00010001",id:67,platName:"金爱农",templateContent:"尊敬的${username}，你有一笔应还金额￥${amount}元的借 款在${date}到期，请及时还款。如果还款过程中遇到问题，请联系我们的客服人员",taskUrl:"http://172.16.34.174:10030/com.cgtz.module.cgjr.task.OutOfRangeRepayTask",senceName:"逾期",targetType:1,productName:"微农贷"},{senceExt:"30",status:3,productCode:"WND",remark:"逾期30天后发送短信任务",sceneId:1,msgSign:"常山人公司",sendType:1,platCode:"1",companyName:"常山分公司",companyCode:"000100010003",id:68,platName:"金爱农",templateContent:"尊敬的${username}，你有一笔应还金额${amount}元的借 款在${date}到期，请你马上还款，逾 期超过30天，我们将通知你的紧急联系人和相关亲友。",senceName:"逾期",productName:"微农贷",targetType:1,verifyFailReason:"短信模板内容渠道不通过",templateName:""},{senceExt:"123123",status:1,productCode:"WND",remark:"123123",sceneId:1,msgSign:"1231232",sendType:1,platCode:"1",companyName:"山东金爱农",companyCode:"0002",id:69,platName:"金爱农",templateContent:"123123123",senceName:"逾期",targetType:1,productName:"微农贷"},{senceExt:"4",status:1,productCode:"WND",remark:"11",sceneId:1,msgSign:"【农游】",sendType:1,platCode:"1",companyName:"浙江金爱农龙游分公司",companyCode:"000100010002",id:70,platName:"金爱农",templateContent:"尊敬的${username}，你有一笔应还金额￥${amount}元的借 款在${date}到期，请你马上还款，逾 期超过30天，我们将通知你的紧急联系人和相关亲友。",senceName:"逾期",targetType:1,productName:"微农贷"},{senceExt:"1",status:1,productCode:"WND",remark:"1",sceneId:1,msgSign:"1",sendType:1,platCode:"1",companyName:"浙江金爱农网络科技有限公司衢州分公司",companyCode:"00010001",id:71,platName:"金爱农",templateContent:"1",senceName:"逾期",targetType:1,productName:"微农贷"},{senceExt:"2",status:1,productCode:"WND",remark:"好吧",sceneId:1,msgSign:"好吧",sendType:1,platCode:"1",companyName:"浙江金爱农网络科技有限公司衢州分公司",companyCode:"00010001",id:72,platName:"金爱农",templateContent:"2",senceName:"逾期",targetType:1,productName:"微农贷"}]}});