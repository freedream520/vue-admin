webpackJsonp([2],{"NLQ/":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=t("fn1u"),o=t.n(n),i=t("Sb74"),r=t.n(i),s=t("ntLO"),l=t.n(s),c={name:"GroupCompany",data:function(){return{companyData:{id:1,name:"总公司",code:"001",twoDimensionCodeImageUrl:"http://cgtzimage.b0.upaiyun.com/matrix/image/000000000000000B.png"},searchInfo:{list:[]},addInfo:{isOpen:!1,form:{name:"",code:"",guaranteed:"",isEnd:"",area:"",principalArea:"",parentId:""}},changeInfo:{isOpen:!1,form:{}},statusInfo:{isOpen:!1,form:{}},bangDepartment:{isOpen:!1,list:[]},bangRole:{isOpen:!1,list:[]},companyRules:{name:[{required:!0,message:"公司名称不能为空",trigger:"change"}],code:[{required:!0,message:"公司编码不能为空",trigger:"change"}],guaranteed:[{required:!0,message:"投资担保账户不能为空",trigger:"change"}],isEnd:[{required:!0,message:"请选择是否为最终节点",trigger:"change"}],area:[{required:!0,message:"请选择并确认地址区域",trigger:"change"}],principalArea:[{required:!0,message:"请选择并添加负责区域",trigger:"change"}]}}},methods:{getListAjax:function(){console.log("发送ajax查询数据或分页规则处理"),this.searchInfo.list=o.a},formatValue:function(e,a,t){if("status"===a.property)return this.fomatLoopValue(t,[{text:"1",value:"禁用"},{text:"0",value:"启用"}])},sendAddAjax:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;console.log("在此发送addInfo.form数据"),console.log(a.addInfo.form)})},resetAddInfo:function(){this.resetForm("formByAdd"),this.addInfo.isOpen=!1},openChange:function(e){var a=this;this.changeInfo.isOpen=!0,setTimeout(function(){a.$refs.formByChange.resetFields(),a.changeInfo.form={name:e.name,code:e.code,guaranteed:e.guaranteed,isEnd:e.isEnd,area:e.area,principalArea:e.principalArea,parentId:e.parentId,parentName:e.parentName,areaName:e.areaName,principalAreaName:e.principalAreaName}},100)},sendChangeAjax:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return!1;console.log("在此发送changeInfo.form数据"),console.log(a.changeInfo.form)})},resetChangeInfo:function(){this.$refs.formByChange.resetFields(),this.changeInfo.isOpen=!1},openStatus:function(e){this.statusInfo={isOpen:!0,form:e}},sendStatusAjax:function(){console.log("确认启用或禁用")},openDepartment:function(e){var a=this;this.bangDepartment={isOpen:!0,list:r.a},setTimeout(function(){a.checkBangDefault("bangDepartment",r.a)},100)},sendDepartmentAjax:function(){console.log("绑定部门---实际上是发送this.bangDepartment.list经过修改后的数据"),console.log(JSON.stringify(this.bangDepartment.list))},selectDepartmentChange:function(e){this.checkBangStatus(e,this.bangDepartment.list)},openRole:function(e){var a=this;this.bangRole={isOpen:!0,list:l.a},setTimeout(function(){a.checkBangDefault("bangRole",l.a)},100)},closeBang:function(e){this.bangDepartment.isOpen=!1,this.bangRole.isOpen=!1,this.$refs[e].clearSelection()},sendRoleAjax:function(){console.log("绑定角色---实际上是发送this.bangRole.list经过修改后的数据"),console.log(JSON.stringify(this.bangRole.list))},selectRoleChange:function(e){this.checkBangStatus(e,this.bangRole.list)},checkBangStatus:function(e,a){for(var t=[],n=0;n<e.length;n++)t.push(e[n].id);for(var o=0;o<a.length;o++)a[o].bangStatus=t.indexOf(a[o].id)>=0?"1":"0"},checkBangDefault:function(e,a){for(var t=this,n=[],o=0;o<a.length;o++)"1"===a[o].bangStatus&&n.push(a[o]);n.length>0&&n.forEach(function(a){t.$refs[e].toggleRowSelection(a)})}},mounted:function(){this.getListAjax()}},p=c,m=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-col",{attrs:{span:20}},[t("div",{staticClass:"company-big-title"},[e._v("公司管理（"),t("span",[e._v(e._s(e.companyData.name))]),e._v("）")]),e._v(" "),t("SearchWarp",[t("el-form",[t("el-form-item",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(a){e.$router.push("/group/company/staff")}}},[e._v("进入员工管理")]),e._v(" "),t("el-button",{attrs:{plain:""},on:{click:function(a){e.openDepartment(e.companyData.id)}}},[e._v("分配部门")]),e._v(" "),t("el-button",{attrs:{plain:""},on:{click:function(a){e.openRole(e.companyData.id)}}},[e._v("分配角色")]),e._v(" "),1!==e.companyData.id?[t("el-button",{attrs:{plain:""},on:{click:function(a){e.openChange(e.companyData)}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{type:"danger",plain:""},on:{click:function(a){e.openStatus(e.companyData)}}},[e._v("禁用")])]:e._e(),e._v(" "),t("el-button",{attrs:{plain:""},on:{click:function(a){e.$qr([e.companyData.twoDimensionCodeImageUrl,e.companyData.name])}}},[e._v("二维码")])],2)],1)],1),e._v(" "),t("div",{staticClass:"company-little-title"},[t("span",{staticClass:"el-icon-location"}),e._v("公司负责区域")]),e._v(" "),t("div",{staticClass:"company-has-address"},[t("span",[e._v("常州市")]),t("span",[e._v("钟楼区")]),t("span",[e._v("天宁区")]),t("span",[e._v("新北区")]),t("span",[e._v("武进区")]),t("span",[e._v("金坛区")]),t("span",[e._v("溧阳市")])]),e._v(" "),t("div",{staticClass:"company-little-title"},[t("span",{staticClass:"el-icon-setting"}),e._v("子公司管理\n\t\t"),t("el-button",{attrs:{type:"text"},on:{click:function(a){e.addInfo.isOpen=!0}}},[e._v("添加子公司")])],1),e._v(" "),t("el-table",{attrs:{border:"",stripe:"",data:e.searchInfo.list,size:"small"}},[t("el-table-column",{attrs:{align:"center",label:"子公司名称",prop:"name","min-width":"340px",fixed:""}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"code",prop:"code",width:"180"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"地址",prop:"areaName",width:"100"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"状态",prop:"status",formatter:e.formatValue,width:"60"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作","min-width":"550px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",plain:""},on:{click:function(t){e.openChange(a.row)}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{size:"mini",plain:""},on:{click:function(t){e.openDepartment(a.row.id)}}},[e._v("分配部门")]),e._v(" "),t("el-button",{attrs:{size:"mini",plain:""},on:{click:function(t){e.openRole(a.row.id)}}},[e._v("分配角色")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"primary",plain:"",disabled:""}},[e._v("员工管理")]),e._v(" "),t("el-button",{attrs:{size:"mini",type:"1"===a.row.status?"success":"danger",plain:""},on:{click:function(t){e.openStatus(a.row)}}},[e._v(e._s("1"===a.row.status?"启用":"禁用"))]),e._v(" "),t("el-button",{attrs:{size:"mini",plain:""},on:{click:function(t){e.$qr([a.row.twoDimensionCodeImageUrl,a.row.name])}}},[e._v("二维码")])]}}])})],1),e._v(" "),t("el-dialog",{attrs:{title:"添加子公司",width:"600px",center:"",visible:e.addInfo.isOpen,"show-close":!1},on:{"update:visible":function(a){e.$set(e.addInfo,"isOpen",a)}}},[t("el-form",{ref:"formByAdd",attrs:{model:e.addInfo.form,rules:e.companyRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"子公司名称",prop:"name"}},[t("el-input",{attrs:{type:"text"},model:{value:e.addInfo.form.name,callback:function(a){e.$set(e.addInfo.form,"name",a)},expression:"addInfo.form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"子公司Code",prop:"code"}},[t("el-input",{attrs:{type:"text"},model:{value:e.addInfo.form.code,callback:function(a){e.$set(e.addInfo.form,"code",a)},expression:"addInfo.form.code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"投资担保账户",prop:"guaranteed"}},[t("el-input",{attrs:{type:"text"},model:{value:e.addInfo.form.guaranteed,callback:function(a){e.$set(e.addInfo.form,"guaranteed",a)},expression:"addInfo.form.guaranteed"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"上级公司"}},[t("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.companyData.name,callback:function(a){e.$set(e.companyData,"name",a)},expression:"companyData.name"}})],1),e._v(" "),e.addInfo.isOpen?[t("el-form-item",{attrs:{label:"地址区域",prop:"area"}},[t("SelectAddress",{attrs:{btnText:"确认"},model:{value:e.addInfo.form.area,callback:function(a){e.$set(e.addInfo.form,"area",a)},expression:"addInfo.form.area"}}),e._v(" "),t("div",{staticClass:"disNone"},[t("el-input",{attrs:{type:"text"},model:{value:e.addInfo.form.area,callback:function(a){e.$set(e.addInfo.form,"area",a)},expression:"addInfo.form.area"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"负责区域",prop:"principalArea"}},[t("SelectAddress",{attrs:{multiple:"",btnText:"添加"},model:{value:e.addInfo.form.principalArea,callback:function(a){e.$set(e.addInfo.form,"principalArea",a)},expression:"addInfo.form.principalArea"}}),e._v(" "),t("div",{staticClass:"disNone"},[t("el-input",{attrs:{type:"text"},model:{value:e.addInfo.form.principalArea,callback:function(a){e.$set(e.addInfo.form,"principalArea",a)},expression:"addInfo.form.principalArea"}})],1)],1)]:e._e(),e._v(" "),t("el-form-item",{attrs:{label:"是否最终节点",prop:"isEnd"}},[t("el-radio-group",{model:{value:e.addInfo.form.isEnd,callback:function(a){e.$set(e.addInfo.form,"isEnd",a)},expression:"addInfo.form.isEnd"}},[t("el-radio",{attrs:{label:"0"}},[e._v("不是")]),e._v(" "),t("el-radio",{attrs:{label:"1"}},[e._v("是")])],1)],1)],2),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.sendAddAjax("formByAdd")}}},[e._v("新 增")]),e._v(" "),t("el-button",{on:{click:e.resetAddInfo}},[e._v("取 消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"修改公司信息",width:"600px",center:"",visible:e.changeInfo.isOpen,"show-close":!1},on:{"update:visible":function(a){e.$set(e.changeInfo,"isOpen",a)}}},[t("el-form",{ref:"formByChange",attrs:{model:e.changeInfo.form,rules:e.companyRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"子公司名称",prop:"name"}},[t("el-input",{attrs:{type:"text"},model:{value:e.changeInfo.form.name,callback:function(a){e.$set(e.changeInfo.form,"name",a)},expression:"changeInfo.form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"子公司Code",prop:"code"}},[t("el-input",{attrs:{type:"text"},model:{value:e.changeInfo.form.code,callback:function(a){e.$set(e.changeInfo.form,"code",a)},expression:"changeInfo.form.code"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"投资担保账户",prop:"guaranteed"}},[t("el-input",{attrs:{type:"text"},model:{value:e.changeInfo.form.guaranteed,callback:function(a){e.$set(e.changeInfo.form,"guaranteed",a)},expression:"changeInfo.form.guaranteed"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"上级公司"}},[t("el-input",{attrs:{type:"text",disabled:!0},model:{value:e.companyData.name,callback:function(a){e.$set(e.companyData,"name",a)},expression:"companyData.name"}})],1),e._v(" "),!0===e.changeInfo.isOpen?[t("el-form-item",{attrs:{label:"地址区域",prop:"area"}},[t("SelectAddress",{attrs:{name:e.changeInfo.form.areaName,btnText:"确认"},model:{value:e.changeInfo.form.area,callback:function(a){e.$set(e.changeInfo.form,"area",a)},expression:"changeInfo.form.area"}}),e._v(" "),t("div",{staticClass:"disNone"},[t("el-input",{attrs:{type:"text"},model:{value:e.changeInfo.form.area,callback:function(a){e.$set(e.changeInfo.form,"area",a)},expression:"changeInfo.form.area"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"负责区域",prop:"principalArea"}},[t("SelectAddress",{attrs:{name:e.changeInfo.form.principalAreaName,multiple:"",btnText:"添加"},model:{value:e.changeInfo.form.principalArea,callback:function(a){e.$set(e.changeInfo.form,"principalArea",a)},expression:"changeInfo.form.principalArea"}}),e._v(" "),t("div",{staticClass:"disNone"},[t("el-input",{attrs:{type:"text"},model:{value:e.changeInfo.form.principalArea,callback:function(a){e.$set(e.changeInfo.form,"principalArea",a)},expression:"changeInfo.form.principalArea"}})],1)],1)]:e._e(),e._v(" "),t("el-form-item",{attrs:{label:"是否最终节点",prop:"isEnd"}},[t("el-radio-group",{model:{value:e.changeInfo.form.isEnd,callback:function(a){e.$set(e.changeInfo.form,"isEnd",a)},expression:"changeInfo.form.isEnd"}},[t("el-radio",{attrs:{label:"0"}},[e._v("不是")]),e._v(" "),t("el-radio",{attrs:{label:"1"}},[e._v("是")])],1)],1)],2),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.sendChangeAjax("formByChange")}}},[e._v("修 改")]),e._v(" "),t("el-button",{on:{click:e.resetChangeInfo}},[e._v("取 消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"1"===e.statusInfo.form.status?"启用":"禁用",width:"600px",center:"",visible:e.statusInfo.isOpen,"show-close":!1},on:{"update:visible":function(a){e.$set(e.statusInfo,"isOpen",a)}}},[t("p",{staticClass:"text-center"},[e._v("确定"+e._s("1"===e.statusInfo.form.status?"启用":"禁用")),t("span",{staticClass:"text-red"},[e._v(" "+e._s(e.statusInfo.form.name)+" ")]),e._v("吗？")]),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.sendStatusAjax}},[e._v("确 认")]),e._v(" "),t("el-button",{on:{click:function(a){e.statusInfo.isOpen=!1}}},[e._v("取 消")])],1)]),e._v(" "),t("el-dialog",{attrs:{title:"分配部门",width:"360px",center:"",visible:e.bangDepartment.isOpen,"show-close":!1},on:{"update:visible":function(a){e.$set(e.bangDepartment,"isOpen",a)}}},[t("el-table",{ref:"bangDepartment",attrs:{height:"290",data:e.bangDepartment.list,border:"",stripe:"",size:"small"},on:{"selection-change":e.selectDepartmentChange}},[t("el-table-column",{attrs:{type:"selection",width:"60"}}),e._v(" "),t("el-table-column",{attrs:{label:"部门名称",prop:"name"}})],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.sendDepartmentAjax}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(a){e.closeBang("bangDepartment")}}},[e._v("取 消")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"分配部门",width:"360px",center:"",visible:e.bangRole.isOpen,"show-close":!1},on:{"update:visible":function(a){e.$set(e.bangRole,"isOpen",a)}}},[t("el-table",{ref:"bangRole",attrs:{height:"290",data:e.bangRole.list,border:"",stripe:"",size:"small"},on:{"selection-change":e.selectRoleChange}},[t("el-table-column",{attrs:{type:"selection",width:"60"}}),e._v(" "),t("el-table-column",{attrs:{label:"角色名称",prop:"name"}})],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.sendRoleAjax}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(a){e.closeBang("bangRole")}}},[e._v("取 消")])],1)],1)],1)},d=[],f={render:m,staticRenderFns:d},u=f,g=t("/Xao"),b=g(p,u,!1,null,null,null);a.default=b.exports},Sb74:function(e,a){e.exports=[{bangStatus:"1",id:41,name:"超级管理员"},{bangStatus:"1",id:33,name:"业务部"},{bangStatus:"1",id:34,name:"外访部"},{bangStatus:"0",id:35,name:"总经理"},{bangStatus:"1",id:36,name:"财务部"},{bangStatus:"1",id:42,name:"风控部"},{bangStatus:"0",id:43,name:"内务部"}]},fn1u:function(e,a){e.exports=[{area:"330000",areaName:"浙江省",code:"0001",createTime:1497924539e3,createUserId:"1",guaranteed:"55",hasChild:"1",id:24,isEnd:"0",name:"浙江金爱农网络科技有限公司",parentId:"1",parentName:"总公司",principalArea:"330000",principalAreaName:"浙江省",status:"0",type:"0",updateTime:1498555209e3,updateUserId:"22",twoDimensionCodeImageUrl:"http://cgtzimage.b0.upaiyun.com/matrix/image/000000000000000B.png"},{area:"370000",areaName:"山东省",code:"0002",createTime:1497934871e3,createUserId:"1",guaranteed:"55",hasChild:"1",id:27,isEnd:"0",name:"山东金爱农",parentId:"1",parentName:"总公司",principalArea:"370000",principalAreaName:"山东省",status:"1",type:"0",updateTime:1508320815e3,updateUserId:"149",twoDimensionCodeImageUrl:"http://cgtzimage.b0.upaiyun.com/matrix/image/000000000000000B.png"},{area:"320200",areaName:"无锡市",code:"0003",createTime:1497943417e3,createUserId:"34",guaranteed:"111111",hasChild:"1",id:31,isEnd:"0",name:"江苏金爱农网络科技有限公司",parentId:"1",parentName:"总公司",principalArea:"320000",principalAreaName:"江苏省",status:"0",type:"0",updateTime:1498559109e3,updateUserId:"22",twoDimensionCodeImageUrl:"http://cgtzimage.b0.upaiyun.com/matrix/image/000000000000000B.png"},{area:"130208",areaName:"丰润区",code:"0004",createTime:1498615978e3,createUserId:"22",guaranteed:"123456",hasChild:"1",id:40,isEnd:"0",name:"测试公司",parentId:"1",parentName:"总公司",principalArea:"130000",principalAreaName:"河北省",status:"0",type:"0",updateTime:1498616067e3,updateUserId:"22",twoDimensionCodeImageUrl:"http://cgtzimage.b0.upaiyun.com/matrix/image/000000000000000B.png"},{area:"130000",areaName:"河北省",code:"0005",createTime:1498637027e3,createUserId:"1",guaranteed:"00",hasChild:"1",id:43,isEnd:"0",name:"河北总公司",parentId:"1",parentName:"总公司",principalArea:"130000",principalAreaName:"河北省",status:"0",type:"0",twoDimensionCodeImageUrl:"http://cgtzimage.b0.upaiyun.com/matrix/image/000000000000000B.png"},{area:"320000",areaName:"江苏省",code:"0006",createTime:1498736573e3,createUserId:"1",guaranteed:"0006",hasChild:"1",id:46,isEnd:"0",name:"江苏竹艮网络科技有限公司",parentId:"1",parentName:"总公司",principalArea:"320000",principalAreaName:"江苏省",status:"0",type:"0",twoDimensionCodeImageUrl:"http://cgtzimage.b0.upaiyun.com/matrix/image/000000000000000B.png"}]},ntLO:function(e,a){e.exports=[{bangStatus:"1",id:1,name:"管理员"},{bangStatus:"1",id:21,name:"超级管理员"},{bangStatus:"0",id:2,name:"县级业务员"},{bangStatus:"0",id:3,name:"县级风控"},{bangStatus:"0",id:4,name:"县级外访员"},{bangStatus:"0",id:5,name:"县级负责人"},{bangStatus:"1",id:6,name:"市级风控"},{bangStatus:"1",id:7,name:"市级负责人"},{bangStatus:"1",id:8,name:"总经理"},{bangStatus:"0",id:9,name:"县级内务"},{bangStatus:"0",id:10,name:"市级财务"},{bangStatus:"1",id:20,name:"省级风控"},{bangStatus:"1",id:22,name:"市级管理员"},{bangStatus:"1",id:24,name:"市级指派员"},{bangStatus:"1",id:25,name:"副总经理"}]}});